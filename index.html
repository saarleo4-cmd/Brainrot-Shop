<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Brainrots Shop — Sell your Brainrots</title>
  <!-- Tailwind via CDN for quick styling -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!--
    Instructions (top of file):
    - This is a single-file demo storefront (index.html). It runs entirely in the browser and is intended for prototyping.
    - To accept real payments, implement a server endpoint that creates a Stripe Checkout session (recommended) or use PayPal Buttons.
      See the placeholder comments below (search for STRIPE / PAYPAL) for where to add integration.
    - To host: drop this file into GitHub Pages, Netlify, or any static host.
    - To add images: replace placeholder images or provide image URLs in the `products` array in the <script>.
    - This file contains a small "admin" panel (client-side only) so you can add/edit products quickly while prototyping.

    IMPORTANT: Do not upload or sell contraband, illegal items, or personal data. Make sure the items you're selling comply with marketplace laws and platform terms.
  -->
</head>
<body class="bg-gray-50 text-gray-900">
  <header class="bg-white shadow">
    <div class="max-w-6xl mx-auto px-4 py-6 flex items-center justify-between">
      <div class="flex items-center gap-4">
        <div class="rounded-full bg-purple-600 w-12 h-12 flex items-center justify-center text-white font-bold">BR</div>
        <div>
          <h1 class="text-lg font-semibold">Brainrots Shop</h1>
          <p class="text-sm text-gray-500">Sell your brainrots — fast prototype storefront</p>
        </div>
      </div>
      <div class="flex items-center gap-4">
        <button id="open-admin" class="px-3 py-2 bg-gray-100 rounded">Admin</button>
        <button id="cart-btn" class="px-3 py-2 bg-indigo-600 text-white rounded">Cart (<span id="cart-count">0</span>)</button>
      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-8">
    <section class="grid md:grid-cols-3 gap-6" id="products-grid">
      <!-- Product cards rendered by JS -->
    </section>

    <section class="mt-12">
      <h2 class="text-xl font-semibold mb-4">About this prototype</h2>
      <p class="text-gray-600">This page is a client-side demo you can use to list items (brainrots) and let customers add them to a cart. Replace placeholder images, connect a real payment provider, and deploy.</p>
    </section>
  </main>

  <!-- Cart Modal -->
  <div id="cart-modal" class="fixed inset-0 bg-black/50 hidden items-center justify-center">
    <div class="bg-white rounded-xl max-w-2xl w-full p-6">
      <div class="flex items-center justify-between">
        <h3 class="text-lg font-semibold">Your Cart</h3>
        <button id="close-cart" class="text-gray-500">Close</button>
      </div>
      <div id="cart-items" class="mt-4 space-y-4">
        <!-- cart items -->
      </div>
      <div class="mt-6 flex items-center justify-between">
        <div class="text-lg font-semibold">Total: $<span id="cart-total">0.00</span></div>
        <div class="flex gap-3">
          <button id="checkout-btn" class="px-4 py-2 bg-green-600 text-white rounded">Checkout</button>
          <button id="clear-cart" class="px-4 py-2 bg-gray-100 rounded">Clear</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Admin Modal (client-side add products) -->
  <div id="admin-modal" class="fixed inset-0 bg-black/40 hidden items-center justify-center">
    <div class="bg-white rounded-xl max-w-2xl w-full p-6">
      <div class="flex items-center justify-between">
        <h3 class="text-lg font-semibold">Admin — Add / Edit Product</h3>
        <button id="close-admin" class="text-gray-500">Close</button>
      </div>
      <form id="product-form" class="mt-4 grid grid-cols-1 gap-3">
        <input id="p-title" placeholder="Title" class="border p-2 rounded" required />
        <input id="p-price" type="number" step="0.01" placeholder="Price (USD)" class="border p-2 rounded" required />
        <input id="p-image" placeholder="Image URL (optional)" class="border p-2 rounded" />
        <textarea id="p-desc" placeholder="Short description" class="border p-2 rounded"></textarea>
        <div class="flex gap-2">
          <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded">Save</button>
          <button type="button" id="admin-clear" class="px-4 py-2 bg-gray-100 rounded">Clear Form</button>
        </div>
      </form>
      <div class="mt-6">
        <h4 class="font-semibold">Existing products</h4>
        <div id="admin-list" class="mt-2 space-y-2"></div>
      </div>
    </div>
  </div>

  <footer class="mt-12 py-8 text-center text-sm text-gray-500">Prototype storefront — replace with your real legal & payment flows before taking money.</footer>

  <script>
    // --- Demo product data (you can edit via Admin) ---
    let products = [
      {
        id: 'br-1',
        title: 'Brainrot — Lavender Haze',
        price: 9.99,
        img: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300"><rect width="100%" height="100%" fill="%23f3e8ff"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="20" fill="%238b5cf6">Brainrot Image</text></svg>',
        desc: 'A delightful brainrot harvested from a vintage steal-a-brainrot event.'
      },
      {
        id: 'br-2',
        title: 'Brainrot — Crimson Echo',
        price: 14.5,
        img: 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300"><rect width="100%" height="100%" fill="%23fee2e2"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="20" fill="%23ef4444">Brainrot Image</text></svg>',
        desc: 'A rare brainrot with echoing memories.'
      }
    ];

    // Cart
    let cart = {};

    function formatPrice(n){
      return Number(n).toFixed(2);
    }

    function renderProducts(){
      const grid = document.getElementById('products-grid');
      grid.innerHTML = '';
      products.forEach(p => {
        const card = document.createElement('article');
        card.className = 'bg-white rounded-lg p-4 shadow';
        card.innerHTML = `
          <img src="${p.img}" alt="${p.title}" class="w-full h-40 object-cover rounded" />
          <h3 class="mt-3 font-semibold">${p.title}</h3>
          <p class="text-sm text-gray-500 mt-1">${p.desc || ''}</p>
          <div class="mt-4 flex items-center justify-between">
            <div class="text-lg font-bold">$${formatPrice(p.price)}</div>
            <div class="flex gap-2">
              <button class="add-btn px-3 py-1 bg-indigo-600 text-white rounded" data-id="${p.id}">Add</button>
              <button class="buy-btn px-3 py-1 bg-green-600 text-white rounded" data-id="${p.id}">Buy</button>
            </div>
          </div>
        `;
        grid.appendChild(card);
      });

      document.querySelectorAll('.add-btn').forEach(b => b.addEventListener('click', e => addToCart(e.target.dataset.id)));
      document.querySelectorAll('.buy-btn').forEach(b => b.addEventListener('click', e => buyNow(e.target.dataset.id)));
      renderAdminList();
    }

    function addToCart(id){
      cart[id] = (cart[id] || 0) + 1;
      updateCartUI();
    }

    function buyNow(id){
      // Quick path: add to cart and open modal
      cart[id] = (cart[id] || 0) + 1;
      updateCartUI();
      openCart();
    }

    function updateCartUI(){
      const count = Object.values(cart).reduce((a,b)=>a+b,0);
      document.getElementById('cart-count').innerText = count;

      // render cart items in modal
      const cartItems = document.getElementById('cart-items');
      cartItems.innerHTML = '';
      let total = 0;
      for(const id in cart){
        const qty = cart[id];
        const product = products.find(p=>p.id===id);
        if(!product) continue;
        const line = document.createElement('div');
        line.className = 'flex items-center justify-between';
        line.innerHTML = `
          <div>
            <div class="font-semibold">${product.title}</div>
            <div class="text-sm text-gray-500">$${formatPrice(product.price)} × ${qty}</div>
          </div>
          <div class="flex gap-2">
            <button class="dec px-2 py-1 bg-gray-100 rounded" data-id="${id}">-</button>
            <button class="inc px-2 py-1 bg-gray-100 rounded" data-id="${id}">+</button>
          </div>
        `;
        cartItems.appendChild(line);
        total += product.price * qty;
      }
      document.getElementById('cart-total').innerText = formatPrice(total);
      document.querySelectorAll('.dec').forEach(b=>b.addEventListener('click',e=>{
        const id=e.target.dataset.id; cart[id] = Math.max(0, cart[id]-1); if(cart[id]===0) delete cart[id]; updateCartUI();
      }));
      document.querySelectorAll('.inc').forEach(b=>b.addEventListener('click',e=>{ const id=e.target.dataset.id; cart[id] = (cart[id]||0)+1; updateCartUI(); }));
    }

    function openCart(){ document.getElementById('cart-modal').classList.remove('hidden'); document.getElementById('cart-modal').classList.add('flex'); }
    function closeCart(){ document.getElementById('cart-modal').classList.add('hidden'); document.getElementById('cart-modal').classList.remove('flex'); }

    // Admin
    function openAdmin(){ document.getElementById('admin-modal').classList.remove('hidden'); document.getElementById('admin-modal').classList.add('flex'); }
    function closeAdmin(){ document.getElementById('admin-modal').classList.add('hidden'); document.getElementById('admin-modal').classList.remove('flex'); }

    function renderAdminList(){
      const list = document.getElementById('admin-list');
      list.innerHTML = '';
      products.forEach(p=>{
        const row = document.createElement('div');
        row.className = 'flex items-center justify-between border p-2 rounded';
        row.innerHTML = `
          <div>
            <div class="font-semibold">${p.title} — $${formatPrice(p.price)}</div>
            <div class="text-xs text-gray-500">id: ${p.id}</div>
          </div>
          <div class="flex gap-2">
            <button class="edit-btn px-2 py-1 bg-yellow-300 rounded" data-id="${p.id}">Edit</button>
            <button class="del-btn px-2 py-1 bg-red-300 rounded" data-id="${p.id}">Delete</button>
          </div>
        `;
        list.appendChild(row);
      });
      document.querySelectorAll('.del-btn').forEach(b=>b.addEventListener('click',e=>{
        products = products.filter(p=>p.id!==e.target.dataset.id); renderProducts();
      }));
      document.querySelectorAll('.edit-btn').forEach(b=>b.addEventListener('click',e=>{
        const p = products.find(pp=>pp.id===e.target.dataset.id);
        document.getElementById('p-title').value = p.title;
        document.getElementById('p-price').value = p.price;
        document.getElementById('p-image').value = p.img.startsWith('data:') ? '' : p.img;
        document.getElementById('p-desc').value = p.desc || '';
        // When saved we'll replace the product with same id
        document.getElementById('product-form').dataset.editing = p.id;
        openAdmin();
      }));
    }

    document.getElementById('open-admin').addEventListener('click', ()=>{ openAdmin(); });
    document.getElementById('close-admin').addEventListener('click', ()=>{ closeAdmin(); });
    document.getElementById('cart-btn').addEventListener('click', ()=>{ openCart(); updateCartUI(); });
    document.getElementById('close-cart').addEventListener('click', ()=>{ closeCart(); });
    document.getElementById('clear-cart').addEventListener('click', ()=>{ cart = {}; updateCartUI(); closeCart(); });

    document.getElementById('product-form').addEventListener('submit', (e)=>{
      e.preventDefault();
      const title = document.getElementById('p-title').value.trim();
      const price = parseFloat(document.getElementById('p-price').value);
      const img = document.getElementById('p-image').value.trim();
      const desc = document.getElementById('p-desc').value.trim();
      const editing = e.target.dataset.editing;
      if(editing){
        products = products.map(p=> p.id===editing ? {...p, title, price, img: img||p.img, desc} : p);
        delete e.target.dataset.editing;
      } else {
        const id = 'br-' + Math.random().toString(36).slice(2,9);
        products.push({id, title, price, img: img || 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300"><rect width="100%" height="100%" fill="%23eef2ff"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="20" fill="%235b21b6">Brainrot</text></svg>', desc});
      }
      e.target.reset();
      renderProducts();
      closeAdmin();
    });

    document.getElementById('admin-clear').addEventListener('click', ()=>{ document.getElementById('product-form').reset(); delete document.getElementById('product-form').dataset.editing; });

    // Checkout flow (demo only)
    document.getElementById('checkout-btn').addEventListener('click', ()=>{
      // DEMO: This is where you would call your backend to create a Stripe Checkout Session
      // Example flow (server-side):
      // 1) Send cart contents to your server (POST /create-checkout-session)
      // 2) Server calls Stripe SDK with line_items and returns sessionId
      // 3) Client redirects: stripe.redirectToCheckout({ sessionId })
      
      // For the prototype we show an alert with the cart summary.
      const lines = [];
      let total = 0;
      for(const id in cart){
        const qty = cart[id];
        const p = products.find(x=>x.id===id);
        lines.push(`${p.title} × ${qty} — $${formatPrice(p.price * qty)}`);
        total += p.price * qty;
      }
      if(lines.length===0){ alert('Your cart is empty.'); return; }
      alert('Demo checkout\n\n' + lines.join('\n') + '\n\nTotal: $' + formatPrice(total) + '\n\nTo take real payments, replace this with calls to your server and payment provider.');

      // Clearing cart in demo
      cart = {};
      updateCartUI();
      closeCart();
    });

    // Initial render
    renderProducts();
  </script>
</body>
</html>
